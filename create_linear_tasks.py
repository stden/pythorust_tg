#!/usr/bin/env python3
"""
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ Linear –∏–∑ projects_tasks.md –∏ ACTION_PLAN.md
"""

import os
import sys
from linear_client import LinearClient, LinearError
from dotenv import load_dotenv

load_dotenv()

TEAM_KEY = (os.getenv("LINEAR_TEAM_KEY") or "").strip()
if not TEAM_KEY:
    print("LINEAR_TEAM_KEY –Ω–µ –∑–∞–¥–∞–Ω (–¥–æ–±–∞–≤—å—Ç–µ –≤ .env).")
    sys.exit(1)

# –ó–∞–¥–∞—á–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
TASKS = {
    "urgent": [
        # –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (—Å–µ–≥–æ–¥–Ω—è)
        (
            "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Calendly –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π",
            "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª–æ—Ç–æ–≤ –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –ø–æ AI/–Ω–µ–π—Ä–æ—Å–µ—Ç—è–º",
            1,
        ),
        (
            "–ù–∞–ø–∏—Å–∞—Ç—å pitch-—à–∞–±–ª–æ–Ω –¥–ª—è —Å–∞–ø–ø–æ—Ä—Ç –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞",
            "–®–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞ –¥–ª—è B2B –ø—Ä–æ–¥–∞–∂ AI —Å–∞–ø–ø–æ—Ä—Ç–∞. –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è: –∫–æ–º–ø–∞–Ω–∏–∏ —Å 1-–π –ª–∏–Ω–∏–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
            1,
        ),
        ("–ü–æ—Å—Ç –≤ LinkedIn –ø—Ä–æ AI –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é", "20 –º–∏–Ω - –Ω–∞–ø–∏—Å–∞—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç —Å –∫–µ–π—Å–∞–º–∏ AI –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏", 1),
        (
            "–°–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ 10 –∫–æ–º–ø–∞–Ω–∏–π –¥–ª—è pitch",
            "–ö–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ —Å–∞–ø–ø–æ—Ä—Ç –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞: SaaS, e-commerce, —Ñ–∏–Ω—Ç–µ—Ö",
            1,
        ),
    ],
    "this_week": [
        # –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ
        ("–û—Ç–ø—Ä–∞–≤–∏—Ç—å 3 pitch –ø–∏—Å—å–º–∞ —Å–∞–ø–ø–æ—Ä—Ç –∞–≤—Ç–æ–ø–∏–ª–æ—Ç", "–ü–µ—Ä–≤—ã–µ cold outreach –ø–∏—Å—å–º–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º", 2),
        (
            "–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ —Å–æ–∑–≤–æ–Ω—ã",
            "–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –¥–∞—Ç—ã –∏ —Ñ–æ—Ä–º–∞—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏",
            2,
        ),
        ("–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–µ–º–æ –¥–ª—è –æ–Ω–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∏", "–û–±–Ω–æ–≤–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–µ–º–æ –¥–ª—è –Ω–æ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏", 2),
        ("–£—Ç–æ—á–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤", "–£—Ç–æ—á–Ω–∏—Ç—å —Å—Ä–æ–∫–∏ –ø–æ—Å—Ç–∞–≤–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤", 3),
    ],
    "projects": [
        # –ü—Ä–æ–µ–∫—Ç—ã –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
        (
            "Telegram ‚Üí Linear –±–æ—Ç MVP",
            "–ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∑–∞–¥–∞—á–∏ —Å –∞–≤—Ç–æ—Ç–µ–≥–∞–º–∏. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞",
            2,
        ),
        (
            "–°–∞–ø–ø–æ—Ä—Ç/Helpdesk –∞–≤—Ç–æ–ø–∏–ª–æ—Ç - specs",
            "Specs –≥–æ—Ç–æ–≤—ã: codev/specs/0002-helpdesk-autopilot.md. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ø–æ–∏—Å–∫ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞",
            2,
        ),
        (
            "HR/AI –ø—Ä–æ–¥—É–∫—Ç –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π",
            "Specs –≥–æ—Ç–æ–≤—ã: codev/specs/0003-hr-ai-interviewer.md. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª 200-600K/–º–µ—Å",
            3,
        ),
        ("–ì–æ–ª–æ—Å–æ–≤–æ–π AI-–ø—Ä–æ–¥–∞–≤–µ—Ü", "Spec: codev/specs/spec-2025-11-23-neuro-sales-agent.md. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–ª–∞–Ω", 3),
        ("–ê–≤—Ç–æ–¥–∞–π–¥–∂–µ—Å—Ç —á–∞—Ç–æ–≤", "–î–Ω–µ–≤–Ω—ã–µ/–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Ä–µ–∑—é–º–µ —á–∞—Ç–æ–≤ chat_alpha, chat_beta, chat_gamma", 3),
    ],
    "infrastructure": [
        # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
        ("n8n - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å workflow automation", "Open-source, self-hosted. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 400+ —Å–µ—Ä–≤–∏—Å–∞–º–∏", 3),
        ("–û–ø–ª–∞—Ç–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–µ—Å—ë—Ä—á–∞", "–†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –æ–ø–ª–∞—Ç–æ–π", 4),
        ("Rust Telegram - –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è grammers", "–ë–∏–ª–¥—ã –≥–æ—Ç–æ–≤—ã, –Ω—É–∂–Ω–∞ –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è –¥–ª—è grammers 0.8", 3),
    ],
    "wellness": [
        # –°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ
        ("–ò–∑—É—á–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ö–æ–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∫—É—Ä—Å–æ–≤", "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ—Ü–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å", 4),
    ],
    "events": [
        # –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
        ("–û—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—É–± –≤ –∫–æ–Ω—Ü–µ –º–µ—Å—è—Ü–∞", "18:00-20:00, —Ñ–æ—Ä–º–∞—Ç –æ–±—Å—É–∂–¥–µ–Ω–∏—è, —É—á–∞—Å—Ç–∏–µ –ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏", 2),
        ("–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ª–µ–∫—Ü–∏—è", "TBD - –≤—ã–±—Ä–∞—Ç—å —Ç–µ–º—É –∏ —Å–ø–∏–∫–µ—Ä–∞", 3),
    ],
    "fintech": [
        # –§–∏–Ω—Ç–µ—Ö/–∫—Ä–∏–ø—Ç–æ –ø—Ä–æ–µ–∫—Ç—ã
        ("–ü–ª–∞—Ç—ë–∂–Ω—ã–π —Å–µ—Ä–≤–∏—Å - —Ä–∞–∑–≤–∏—Ç–∏–µ", "USDT –ø–ª–∞—Ç—ë–∂–Ω—ã–π —Å–µ—Ä–≤–∏—Å. –°—Ç–∞—Ç—É—Å: –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ/–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–∏", 3),
        ("Crypto Card –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ", "–ö—Ä–∏–ø—Ç–æ–∫–∞—Ä—Ç–∞, –ø–ª–∞–Ω –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞", 3),
        ("Google Ads –¥–ª—è –∫—Ä–∏–ø—Ç–æ", "–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç", 4),
    ],
    "learning": [
        # –û–±—É—á–µ–Ω–∏–µ –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
        (
            "–ê–ª–≥–æ—Ä–∏—Ç–º –õ–µ–Ω—Å—Ç—Ä—ã - –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã",
            "–°–ª–æ–∂–Ω–æ—Å—Ç—å, —à–∞–≥–∏, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ Ax<=b –≤ Python. –°–æ–∑–≤–æ–Ω –ø–æ—Å–ª–µ 19:00 –≤ —Å—Ä–µ–¥—É",
            3,
        ),
        ("–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º - —Ä–∞–∑–≤–∏–≤–∞—Ç—å", "5,000-15,000 —Ä—É–±/—á–∞—Å. –í–æ—Ä–∫—à–æ–ø—ã 80,000-200,000 —Ä—É–±/–¥–µ–Ω—å", 2),
    ],
}


def main():
    try:
        client = LinearClient()
    except LinearError as e:
        print(f"–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Linear: {e}")
        sys.exit(1)

    created = 0
    errors = 0

    for category, tasks in TASKS.items():
        print(f"\nüìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category}")
        print("-" * 40)

        for title, description, priority in tasks:
            try:
                issue = client.create_issue(
                    team_key=TEAM_KEY,
                    title=title,
                    description=f"{description}\n\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category}",
                    priority=priority,
                )
                print(f"  ‚úÖ {issue['identifier']}: {title}")
                print(f"     URL: {issue['url']}")
                created += 1
            except LinearError as e:
                print(f"  ‚ùå {title}: {e}")
                errors += 1

    print(f"\n{'=' * 50}")
    print(f"üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–æ–∑–¥–∞–Ω–æ {created} –∑–∞–¥–∞—á, –æ—à–∏–±–æ–∫ {errors}")


if __name__ == "__main__":
    main()
